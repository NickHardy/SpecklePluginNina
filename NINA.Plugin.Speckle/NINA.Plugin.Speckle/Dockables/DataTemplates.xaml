<ResourceDictionary
    x:Class="NINA.Plugin.Speckle.Dockables.DataTemplates"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:local="clr-namespace:NINA.Plugin.Speckle.Dockables"
    xmlns:ns="clr-namespace:NINA.Core.Locale;assembly=NINA.Core" xmlns:utility="clr-namespace:NINA.Core.Utility;assembly=NINA.Core">
    <DataTemplate x:Key="NINA.Plugin.Speckle.Dockables.TargetListDock_Dockable" DataType="{x:Type local:TargetListDock}">
        <Grid DataContext="{Binding}">
            <Grid.Resources>
                <utility:BindingProxy x:Key="targetList" Data="{Binding}" />
            </Grid.Resources>

            <Grid VerticalAlignment="Top">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid Grid.Column="0" HorizontalAlignment="Left" Margin="5,10,5,10">
                    <Button
                        Height="25"
                        MinWidth="50"
                        Margin="0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Command="{Binding OpenFileCommand}">
                        <TextBlock Padding="5,0" Foreground="{StaticResource ButtonForegroundBrush}" Text="{ns:Loc LblLoadTargetSet}" />
                    </Button>
                </Grid>
                <Grid Grid.Column="1" HorizontalAlignment="Right" Margin="5,10,5,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition Width="auto" />
                    </Grid.ColumnDefinitions>
                    <Button
                        Grid.Column="0"
                        Height="25"
                        MinWidth="50"
                        Margin="10,0,0,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Command="{Binding SlewToCommand}">
                        <TextBlock Padding="5,0" Foreground="{StaticResource ButtonForegroundBrush}" Text="{ns:Loc LblSlewToTarget}" />
                    </Button>
                    <Button
                        Grid.Column="3"
                        Height="25"
                        MinWidth="50"
                        Margin="10,0,0,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Command="{Binding SlewToClusterCommand}">
                        <TextBlock Padding="5,0" Foreground="{StaticResource ButtonForegroundBrush}" Text="Slew to cluster" />
                    </Button>
                    <Button
                        Grid.Column="4"
                        Height="25"
                        MinWidth="50"
                        Margin="10,0,0,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Command="{Binding SynchMountCommand}">
                        <TextBlock Padding="5,0" Foreground="{StaticResource ButtonForegroundBrush}" Text="Synch mount" />
                    </Button>
                </Grid>
            </Grid>

            <DataGrid 
            x:Name="speckleDataGrid"
            Margin="5,50,5,10"
            AutoGenerateColumns="False"
            IsReadOnly="False"
            ItemsSource="{Binding SpeckleTargets}"
            SelectedItem="{Binding SpeckleTarget}"
            SelectionMode="Single">
                <DataGrid.Columns>
                    <DataGridTextColumn Width="*" Binding="{Binding User}" Header="User" />
                    <DataGridTextColumn Width="*" Binding="{Binding Target}" Header="Target" />
                    <DataGridTemplateColumn
                                Width="*"
                                Header="Reference">
                        <DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <CheckBox
                                    Width="20"
                                    Height="20"
                                    Margin="5,0,0,0"
                                    HorizontalAlignment="Center"
                                    BorderBrush="Transparent"
                                    IsChecked="{Binding Ref, FallbackValue=False, Mode=TwoWay}"
                                    IsEnabled="True"
                                    Style="{StaticResource CheckmarkCheckbox}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellEditingTemplate>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox
                                    Width="20"
                                    Height="20"
                                    Margin="5,0,0,0"
                                    HorizontalAlignment="Center"
                                    BorderBrush="Transparent"
                                    IsChecked="{Binding Ref, FallbackValue=False, Mode=TwoWay}"
                                    IsEnabled="False"
                                    Style="{StaticResource CheckmarkCheckbox}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTextColumn Width="*" Binding="{Binding Nights}" Header="Nights" />
                    <DataGridTextColumn Width="*" Binding="{Binding Cycles}" Header="Cycles" />
                    <DataGridTextColumn Width="*" Binding="{Binding Priority}" Header="Priority" />
                    <DataGridTextColumn Width="*" Binding="{Binding ExposureTime}" Header="ExposureTime" />
                    <DataGridTextColumn Width="*" Binding="{Binding Exposures}" Header="Exposures" />
                    <DataGridTextColumn Width="*" Binding="{Binding Ra}" Header="Ra" />
                    <DataGridTextColumn Width="*" Binding="{Binding Dec}" Header="Dec" />
                    <DataGridTextColumn Width="*" Binding="{Binding Meridian, StringFormat='{}{0:HH:mm:ss.fff}'}" Header="Meridian time" IsReadOnly="True" />
                    <DataGridTemplateColumn
                                Width="*"
                                Header="Template">
                        <DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <ComboBox
                                        Name="selectTemplate"
                                        ItemsSource="{Binding Data.Templates, Source={StaticResource targetList}}"
                                        SelectedItem="{Binding Template}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellEditingTemplate>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Padding="5,0" Foreground="{StaticResource ButtonForegroundBrush}" Text="{Binding Template}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>

        </Grid>
    </DataTemplate>
</ResourceDictionary>
